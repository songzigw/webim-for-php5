<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Chat Button</title>
<link rel="stylesheet" type="text/css" href="styles.css" />
<style type="text/css">
li {
    margin: 6px 0;
}
</style>
</head>
<body>
    <div class="wrapper">

        <div class="content">
            <p>页面任意位置，可以添加聊天按钮...</p>
            <ul>
                <li><a class="webim-chatbtn" href="#"
                    onclick="openChatBox(1, 'user1', '');" id="webim-chatid-1"
                    data-id="1" data-name="user1" data-avatar="">聊天按钮1</a>
                    <em id="webim-chatid-state-1">下线</em>
                    </li>
                <li><a class="webim-chatbtn" href="#"
                    onclick="openChatBox(2, 'user2', '');" id="webim-chatid-2"
                    data-id="2" data-name="user2" data-avatar="">聊天按钮2</a>
                    <em id="webim-chatid-state-2">下线</em>
                    </li>
                <li><a class="webim-chatbtn" href="#"
                    onclick="openChatBox(3, 'user3', '');" id="webim-chatid-3"
                    data-id="3" data-name="user3" data-avatar="">聊天按钮3</a>
                    <em id="webim-chatid-state-3">下线</em>
                    </li>
                <li><a class="webim-chatbtn" href="#"
                    onclick="openChatBox(4, 'user4', '');" id="webim-chatid-4"
                    data-id="4" data-name="user4" data-avatar="">聊天按钮4</a>
                    <em id="webim-chatid-state-4">下线</em>
                    </li>
                <li><a class="webim-chatbtn" href="#"
                    onclick="openChatBox(5, 'user5', '');" id="webim-chatid-5"
                    data-id="5" data-name="user5" data-avatar="">聊天按钮5</a>
                    <em id="webim-chatid-state-5">下线</em>
                    </li>
                <li><a class="webim-chatbtn" href="#"
                    onclick="openChatBox(6, 'user6', '');" id="webim-chatid-6"
                    data-id="6" data-name="user6" data-avatar="">聊天按钮6</a>
                    <em id="webim-chatid-state-6">下线</em>
                    </li>
                <li><a class="webim-chatbtn" href="#"
                    onclick="openChatBox(7, 'user7', '');" id="webim-chatid-7"
                    data-id="7" data-name="user7" data-avatar="">聊天按钮7</a>
                    <em id="webim-chatid-state-7">下线</em>
                    </li>
                <li><a class="webim-chatbtn" href="#"
                    onclick="openChatBox(8, 'user8', '');" id="webim-chatid-8"
                    data-id="8" data-name="user8" data-avatar="">聊天按钮8</a>
                    <em id="webim-chatid-state-8">下线</em>
                    </li>
                <li><a class="webim-chatbtn" href="#"
                    onclick="openChatBox(9, 'user9', '');" id="webim-chatid-9"
                    data-id="9" data-name="user9" data-avatar="">聊天按钮9</a>
                    <em id="webim-chatid-state-9">下线</em>
                    </li>
            </ul>
        </div>

    </div>

    <script type="text/javascript" src="demo.js"></script>
    <script type="text/javascript" src="../script/nextalk-main.js"></script>
    <script type="text/javascript">
        function openChatBox(id, name, avatar) {
            openWindow("chatbox_simple.html?id=" + id + "&name=" + name
                    + "&avatar=" + avatar, "window_chat", 790, 500);
        }
        function openWindow(url, name, iWidth, iHeight) {
            // 获得窗口的水平位置
            var iLeft = (window.screen.width - 10 - iWidth) / 2;
            // 获得窗口的垂直位置
            var iTop = (window.screen.height - 30 - iHeight) / 2;
            window.open(url, name, 'height='
                                + iHeight
                                + ',innerHeight='
                                + iHeight
                                + ',width='
                                + iWidth
                                + ',innerWidth='
                                + iWidth
                                + ',top='
                                + iTop
                                + ',left='
                                + iLeft
                                + ',toolbar=no,menubar=no,scrollbars=no,resizeable=no,location=no,status=no');
        }
        nextalkMain.setConfig({
            // 引入资源文件的根路径
            resPath : demo.resPath,
            // API根路径
            apiPath : demo.apiPath,
            hidden : true,
            chatlinkIds : '1,2,3,4,5,6,7,8,9',
            onChatlinks : function(data) {
                if (data) {
                    for (var key in data) {
                        if (data[key] != 'unavailable') {
                            document.getElementById('webim-chatid-state-'+key).innerText = '在线';
                        } else {
                            document.getElementById('webim-chatid-state-'+key).innerText = '下线';
                        }
                    }
                }
            },
            // API路由
            route : demo.route
        });
        nextalkMain.go();
    </script>
</body>
</html>